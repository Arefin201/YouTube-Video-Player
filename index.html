<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Video Player Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary-gradient: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            --secondary-gradient: linear-gradient(135deg, #6366F1, #8B5CF6);
            --dark-bg: #0F172A;
            --card-bg: rgba(30, 41, 59, 0.7);
            --card-border: rgba(255, 255, 255, 0.1);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            color: white;
        }
        
        .glass-effect {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--card-border);
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .history-item {
            transition: all 0.3s ease;
        }
        
        .history-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
        }
        
        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* Animation for new history items */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Pulse animation for suggestions */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .animate-pulse-slow {
            animation: pulse 3s infinite ease-in-out;
        }
        
        /* Theme switcher */
        .theme-switcher {
            position: relative;
            width: 60px;
            height: 30px;
            border-radius: 15px;
            background: var(--secondary-gradient);
            cursor: pointer;
        }
        
        .theme-switcher-handle {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            transition: all 0.3s ease;
        }
        
        .theme-switcher.dark .theme-switcher-handle {
            left: 33px;
        }
        
        /* Video suggestions */
        .suggestion-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .suggestion-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
        }
        
        /* Progress bar */
        .progress-bar {
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--secondary-gradient);
            border-radius: 2px;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Volume slider */
        .volume-slider {
            -webkit-appearance: none;
            width: 100px;
            height: 5px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
        }
        
        /* Settings panel */
        .settings-panel {
            transition: all 0.3s ease;
            max-height: 0;
            overflow: hidden;
        }
        
        .settings-panel.open {
            max-height: 300px;
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-10 gap-4">
            <div class="text-center md:text-left">
                <h1 class="text-3xl md:text-4xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-red-400 to-red-600">YouTube Player Pro</h1>
                <p class="text-lg opacity-90">Advanced YouTube video player with local storage</p>
            </div>
            
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                    <i class="fas fa-sun opacity-70"></i>
                    <div class="theme-switcher" id="theme-switcher">
                        <div class="theme-switcher-handle"></div>
                    </div>
                    <i class="fas fa-moon opacity-70"></i>
                </div>
                
                <button id="settings-btn" class="p-3 glass-effect rounded-full hover:bg-white/10 transition-colors">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </header>
        
        <!-- Settings Panel -->
        <div id="settings-panel" class="glass-effect rounded-2xl mb-8 settings-panel custom-scrollbar overflow-y-auto">
            <div class="p-6">
                <h2 class="text-xl font-semibold mb-4">Settings</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block mb-2">Autoplay</label>
                        <label class="inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="autoplay-toggle" class="sr-only peer">
                            <div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                            <span class="ml-3 text-sm" id="autoplay-status">Enabled</span>
                        </label>
                    </div>
                    
                    <div>
                        <label class="block mb-2">Max History Items</label>
                        <input type="range" id="history-limit" min="5" max="20" value="10" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs opacity-70 mt-1">
                            <span>5</span>
                            <span id="history-limit-value">10</span>
                            <span>20</span>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block mb-2">Default Volume</label>
                        <input type="range" id="default-volume" min="0" max="100" value="80" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs opacity-70 mt-1">
                            <span>0%</span>
                            <span id="volume-value">80%</span>
                            <span>100%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column - Input and Player -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Input Section -->
                <div class="glass-effect rounded-2xl p-6 shadow-xl">
                    <h2 class="text-xl font-semibold mb-4">Enter YouTube Video</h2>
                    <div class="flex flex-col sm:flex-row gap-3">
                        <input 
                            type="text" 
                            id="video-input" 
                            placeholder="Enter URL or Video ID (e.g., dQw4w9WgXcQ)" 
                            class="flex-grow px-4 py-3 rounded-lg bg-white/10 border border-white/20 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent placeholder-white/70"
                        >
                        <button id="play-btn" class="px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors">
                            <i class="fas fa-play"></i> Play
                        </button>
                    </div>
                    <p class="text-sm mt-3 opacity-80">Examples: https://www.youtube.com/watch?v=dQw4w9WgXcQ or just dQw4w9WgXcQ</p>
                    
                    <!-- Video suggestions -->
                    <div class="mt-6">
                        <h3 class="font-medium mb-3">Try these popular videos:</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                            <div class="suggestion-card glass-effect rounded-lg p-3 text-center animate-pulse-slow" data-id="dQw4w9WgXcQ">
                                <div class="text-red-500 mb-1"><i class="fab fa-youtube text-xl"></i></div>
                                <p class="text-xs truncate">Never Gonna Give You Up</p>
                            </div>
                            <div class="suggestion-card glass-effect rounded-lg p-3 text-center" data-id="jNQXAC9IVRw">
                                <div class="text-red-500 mb-1"><i class="fab fa-youtube text-xl"></i></div>
                                <p class="text-xs truncate">Me at the zoo</p>
                            </div>
                            <div class="suggestion-card glass-effect rounded-lg p-3 text-center" data-id="9bZkp7q19f0">
                                <div class="text-red-500 mb-1"><i class="fab fa-youtube text-xl"></i></div>
                                <p class="text-xs truncate">Gangnam Style</p>
                            </div>
                            <div class="suggestion-card glass-effect rounded-lg p-3 text-center" data-id="OPf0YbXqDm0">
                                <div class="text-red-500 mb-1"><i class="fab fa-youtube text-xl"></i></div>
                                <p class="text-xs truncate">Mark Ronson - Uptown Funk</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Player Section -->
                <div class="glass-effect rounded-2xl p-6 shadow-xl">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold">Video Player</h2>
                        <div class="flex items-center gap-3">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-volume-up opacity-70"></i>
                                <input type="range" id="volume-control" min="0" max="100" value="80" class="volume-slider">
                            </div>
                            <button id="theater-mode" class="p-2 glass-effect rounded-lg hover:bg-white/10 transition-colors" title="Theater Mode">
                                <i class="fas fa-expand-alt"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="video-container">
                        <iframe id="video-player" src="about:blank" allowfullscreen></iframe>
                    </div>
                    
                    <div class="mt-4 flex items-center justify-between">
                        <div class="text-sm">
                            <span id="video-title">No video selected</span>
                        </div>
                        <div class="flex gap-2">
                            <button id="like-btn" class="p-2 glass-effect rounded-lg hover:bg-white/10 transition-colors" title="Like">
                                <i class="far fa-thumbs-up"></i>
                            </button>
                            <button id="dislike-btn" class="p-2 glass-effect rounded-lg hover:bg-white/10 transition-colors" title="Dislike">
                                <i class="far fa-thumbs-down"></i>
                            </button>
                            <button id="share-btn" class="p-2 glass-effect rounded-lg hover:bg-white/10 transition-colors" title="Share">
                                <i class="fas fa-share-alt"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Progress bar for demo purposes -->
                    <div class="progress-bar mt-4">
                        <div class="progress-fill" id="video-progress"></div>
                    </div>
                </div>
            </div>
            
            <!-- Right Column - History -->
            <div class="glass-effect rounded-2xl p-6 shadow-xl">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold">Recently Played</h2>
                    <div class="flex gap-2">
                        <button id="export-history" class="p-2 glass-effect rounded-lg hover:bg-white/10 transition-colors" title="Export History">
                            <i class="fas fa-download"></i>
                        </button>
                        <button id="clear-history" class="p-2 glass-effect rounded-lg hover:bg-white/10 transition-colors" title="Clear History">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                
                <div class="relative">
                    <input 
                        type="text" 
                        id="history-search" 
                        placeholder="Search history..." 
                        class="w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent placeholder-white/70 mb-4"
                    >
                    <i class="fas fa-search absolute right-3 top-3 opacity-70"></i>
                </div>
                
                <ul id="video-history" class="space-y-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar">
                    <li class="text-center py-10 opacity-70" id="empty-history">
                        <i class="fas fa-history text-3xl mb-3"></i>
                        <p>Your video history will appear here</p>
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="text-center mt-12 opacity-70 text-sm">
            <p>Â© 2023 YouTube Player Pro | All videos are served from YouTube</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const videoInput = document.getElementById('video-input');
            const playBtn = document.getElementById('play-btn');
            const videoPlayer = document.getElementById('video-player');
            const videoHistory = document.getElementById('video-history');
            const clearHistoryBtn = document.getElementById('clear-history');
            const emptyHistory = document.getElementById('empty-history');
            const themeSwitcher = document.getElementById('theme-switcher');
            const settingsBtn = document.getElementById('settings-btn');
            const settingsPanel = document.getElementById('settings-panel');
            const theaterModeBtn = document.getElementById('theater-mode');
            const volumeControl = document.getElementById('volume-control');
            const historySearch = document.getElementById('history-search');
            const suggestionCards = document.querySelectorAll('.suggestion-card');
            const exportHistoryBtn = document.getElementById('export-history');
            const autoplayToggle = document.getElementById('autoplay-toggle');
            const historyLimit = document.getElementById('history-limit');
            const historyLimitValue = document.getElementById('history-limit-value');
            const defaultVolume = document.getElementById('default-volume');
            const volumeValue = document.getElementById('volume-value');
            
            // Initialize settings
            let settings = JSON.parse(localStorage.getItem('ytPlayerSettings')) || {
                theme: 'dark',
                autoplay: true,
                historyLimit: 10,
                volume: 80,
                theaterMode: false
            };
            
            // Apply saved settings
            applySettings();
            
            // Load history from local storage
            loadVideoHistory();
            
            // Theme switcher event listener
            themeSwitcher.addEventListener('click', function() {
                settings.theme = settings.theme === 'dark' ? 'light' : 'dark';
                applySettings();
                saveSettings();
                showNotification(`Theme changed to ${settings.theme} mode`, 'success');
            });
            
            // Settings panel toggle
            settingsBtn.addEventListener('click', function() {
                settingsPanel.classList.toggle('open');
            });
            
            // Theater mode toggle
            theaterModeBtn.addEventListener('click', function() {
                settings.theaterMode = !settings.theaterMode;
                document.body.classList.toggle('theater-mode', settings.theaterMode);
                saveSettings();
                showNotification(`Theater mode ${settings.theaterMode ? 'enabled' : 'disabled'}`, 'success');
            });
            
            // Volume control
            volumeControl.addEventListener('input', function() {
                const volume = this.value;
                if (videoPlayer.src !== 'about:blank') {
                    // This would control the volume of the video if we had API access
                    // For demo, we'll just show a notification
                    showNotification(`Volume set to ${volume}%`, 'info');
                }
            });
            
            // History search
            historySearch.addEventListener('input', function() {
                filterHistory(this.value);
            });
            
            // Suggestion cards
            suggestionCards.forEach(card => {
                card.addEventListener('click', function() {
                    const videoId = this.getAttribute('data-id');
                    videoInput.value = videoId;
                    playVideo(videoId);
                    addToHistory(videoId);
                });
            });
            
            // Export history
            exportHistoryBtn.addEventListener('click', function() {
                exportHistory();
            });
            
            // Settings changes
            autoplayToggle.addEventListener('change', function() {
                settings.autoplay = this.checked;
                saveSettings();
                showNotification(`Autoplay ${settings.autoplay ? 'enabled' : 'disabled'}`, 'success');
            });
            
            historyLimit.addEventListener('input', function() {
                settings.historyLimit = parseInt(this.value);
                historyLimitValue.textContent = settings.historyLimit;
                saveSettings();
                
                // Trim history if needed
                let history = JSON.parse(localStorage.getItem('ytVideoHistory')) || [];
                if (history.length > settings.historyLimit) {
                    history = history.slice(0, settings.historyLimit);
                    localStorage.setItem('ytVideoHistory', JSON.stringify(history));
                    loadVideoHistory();
                }
            });
            
            defaultVolume.addEventListener('input', function() {
                settings.volume = parseInt(this.value);
                volumeValue.textContent = `${settings.volume}%`;
                volumeControl.value = settings.volume;
                saveSettings();
            });
            
            // Play button event listener
            playBtn.addEventListener('click', function() {
                const videoId = extractVideoId(videoInput.value);
                if (videoId) {
                    playVideo(videoId);
                    addToHistory(videoId);
                    videoInput.value = '';
                } else {
                    showNotification('Please enter a valid YouTube URL or Video ID', 'error');
                }
            });
            
            // Clear history button event listener
            clearHistoryBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to clear your video history?')) {
                    localStorage.removeItem('ytVideoHistory');
                    loadVideoHistory();
                    showNotification('History cleared successfully', 'success');
                }
            });
            
            // Apply settings function
            function applySettings() {
                // Theme
                if (settings.theme === 'light') {
                    document.documentElement.style.setProperty('--card-bg', 'rgba(255, 255, 255, 0.7)');
                    document.documentElement.style.setProperty('--card-border', 'rgba(0, 0, 0, 0.1)');
                    document.documentElement.style.setProperty('--dark-bg', '#F1F5F9');
                    themeSwitcher.classList.remove('dark');
                } else {
                    document.documentElement.style.setProperty('--card-bg', 'rgba(30, 41, 59, 0.7)');
                    document.documentElement.style.setProperty('--card-border', 'rgba(255, 255, 255, 0.1)');
                    document.documentElement.style.setProperty('--dark-bg', '#0F172A');
                    themeSwitcher.classList.add('dark');
                }
                
                // Other settings
                autoplayToggle.checked = settings.autoplay;
                historyLimit.value = settings.historyLimit;
                historyLimitValue.textContent = settings.historyLimit;
                defaultVolume.value = settings.volume;
                volumeValue.textContent = `${settings.volume}%`;
                volumeControl.value = settings.volume;
                
                // Theater mode
                document.body.classList.toggle('theater-mode', settings.theaterMode);
            }
            
            // Save settings function
            function saveSettings() {
                localStorage.setItem('ytPlayerSettings', JSON.stringify(settings));
            }
            
            // Extract YouTube Video ID from various URL formats
            function extractVideoId(url) {
                if (!url) return null;
                
                // If it's already an ID (no special characters except maybe - and _)
                if (/^[a-zA-Z0-9_-]{11}$/.test(url)) {
                    return url;
                }
                
                // Handle various YouTube URL formats
                const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
                const match = url.match(regExp);
                
                if (match && match[2].length === 11) {
                    return match[2];
                }
                
                return null;
            }
            
            // Play the video
            function playVideo(videoId) {
                const autoplayParam = settings.autoplay ? '1' : '0';
                videoPlayer.src = `https://www.youtube.com/embed/${videoId}?autoplay=${autoplayParam}`;
                
                // Update video title (for demo purposes)
                document.getElementById('video-title').textContent = `Playing: ${videoId}`;
                
                // Simulate progress bar animation
                simulateProgress();
            }
            
            // Simulate video progress (for demo)
            function simulateProgress() {
                const progressBar = document.getElementById('video-progress');
                let width = 0;
                
                const interval = setInterval(() => {
                    if (width >= 100) {
                        clearInterval(interval);
                    } else {
                        width += 0.5;
                        progressBar.style.width = width + '%';
                    }
                }, 100);
            }
            
            // Add video to history
            function addToHistory(videoId) {
                let history = JSON.parse(localStorage.getItem('ytVideoHistory')) || [];
                
                // Avoid duplicates
                history = history.filter(item => item.id !== videoId);
                
                // Add to beginning of array
                history.unshift({
                    id: videoId,
                    title: `Video: ${videoId}`,
                    timestamp: new Date().toISOString()
                });
                
                // Keep only the last X videos based on settings
                if (history.length > settings.historyLimit) {
                    history = history.slice(0, settings.historyLimit);
                }
                
                // Save to local storage
                localStorage.setItem('ytVideoHistory', JSON.stringify(history));
                
                // Update UI
                loadVideoHistory();
                
                // Show success notification
                showNotification('Video added to history', 'success');
            }
            
            // Load video history from local storage
            function loadVideoHistory() {
                const history = JSON.parse(localStorage.getItem('ytVideoHistory')) || [];
                
                if (history.length === 0) {
                    videoHistory.innerHTML = '<li class="text-center py-10 opacity-70" id="empty-history"><i class="fas fa-history text-3xl mb-3"></i><p>Your video history will appear here</p></li>';
                    return;
                }
                
                // Remove empty history message if it exists
                if (emptyHistory) {
                    emptyHistory.remove();
                }
                
                videoHistory.innerHTML = '';
                
                history.forEach((item, index) => {
                    const li = document.createElement('li');
                    li.className = 'history-item glass-effect rounded-lg p-4 animate-fade-in';
                    li.style.animationDelay = `${index * 0.05}s`;
                    
                    li.innerHTML = `
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-3">
                                <span class="bg-red-600 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center">${index + 1}</span>
                                <span class="font-medium truncate">${item.title}</span>
                            </div>
                            <div class="flex gap-2">
                                <button class="play-btn p-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors" data-id="${item.id}" title="Play">
                                    <i class="fas fa-play"></i>
                                </button>
                                <button class="delete-btn p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors" data-id="${item.id}" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="text-xs opacity-70 mt-2">
                            Played on ${new Date(item.timestamp).toLocaleString()}
                        </div>
                    `;
                    
                    videoHistory.appendChild(li);
                });
                
                // Add event listeners to the new buttons
                document.querySelectorAll('.play-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const videoId = this.getAttribute('data-id');
                        playVideo(videoId);
                        showNotification('Playing video from history', 'success');
                    });
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const videoId = this.getAttribute('data-id');
                        deleteFromHistory(videoId);
                    });
                });
            }
            
            // Filter history based on search query
            function filterHistory(query) {
                const historyItems = document.querySelectorAll('.history-item');
                
                historyItems.forEach(item => {
                    const title = item.querySelector('.font-medium').textContent.toLowerCase();
                    if (title.includes(query.toLowerCase())) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            }
            
            // Delete video from history
            function deleteFromHistory(videoId) {
                let history = JSON.parse(localStorage.getItem('ytVideoHistory')) || [];
                history = history.filter(item => item.id !== videoId);
                localStorage.setItem('ytVideoHistory', JSON.stringify(history));
                loadVideoHistory();
                showNotification('Video removed from history', 'success');
            }
            
            // Export history as JSON file
            function exportHistory() {
                const history = JSON.parse(localStorage.getItem('ytVideoHistory')) || [];
                
                if (history.length === 0) {
                    showNotification('No history to export', 'error');
                    return;
                }
                
                const dataStr = JSON.stringify(history, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = 'youtube-history.json';
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                showNotification('History exported successfully', 'success');
            }
            
            // Show notification
            function showNotification(message, type) {
                // Remove any existing notifications
                const existingNotification = document.querySelector('.notification');
                if (existingNotification) {
                    existingNotification.remove();
                }
                
                const notification = document.createElement('div');
                notification.className = `notification fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg font-medium flex items-center gap-3 transition-transform transform translate-y-10 opacity-0 ${type === 'error' ? 'bg-red-600' : type === 'info' ? 'bg-blue-600' : 'bg-green-600'}`;
                
                notification.innerHTML = `
                    ${type === 'error' ? '<i class="fas fa-exclamation-circle"></i>' : type === 'info' ? '<i class="fas fa-info-circle"></i>' : '<i class="fas fa-check-circle"></i>'}
                    <span>${message}</span>
                `;
                
                document.body.appendChild(notification);
                
                // Animate in
                setTimeout(() => {
                    notification.classList.remove('translate-y-10', 'opacity-0');
                    notification.classList.add('translate-y-0', 'opacity-100');
                }, 10);
                
                // Animate out and remove after 3 seconds
                setTimeout(() => {
                    notification.classList.remove('translate-y-0', 'opacity-100');
                    notification.classList.add('translate-y-10', 'opacity-0');
                    
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 3000);
            }
        });
    </script>
</body>
</html>